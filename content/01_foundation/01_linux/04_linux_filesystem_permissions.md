## Introduction

In the previous lesson, you gained crucial skills for navigating the Linux command line. Now, let's deepen your understanding of how Linux organizes and protects its information. Filesystems and permissions are fundamental concepts that empower you to manage your data securely and understand how applications interact with your system.

Imagine Linux as a highly organized library. Filesystems are the different rooms and sections within that library, each serving a specific purpose. Permissions are the rules that dictate who can read, write, or execute the "books" (files) and who can enter specific "rooms" (directories). Mastering these will give you greater control and insight into your Linux environment.

### Lesson Overview

This section contains a general overview of topics that you will learn in this lesson.

* Understanding key directories within the Linux filesystem hierarchy.
* Deciphering file and directory permissions (read, write, execute).
* Learning to view permissions using `ls -l`.
* Mastering commands to change file permissions (`chmod`).
* Understanding how to change file ownership (`chown`).
* Exploring the `sudo` command for elevated privileges.
* Briefly introducing `useradd` for user management context.

### Assignment

<div class="lesson-content__panel" markdown="1">

1.  Read through the explanations of common Linux filesystem directories.
2.  Grasp the concept of file modes: read, write, and executable.
3.  Practice using `ls -l` to inspect permissions of various files and directories.
4.  Work through the exercises for `chmod` and `chown` to modify permissions and ownership.
5.  Understand the power and responsibility that comes with using `sudo`.

</div>

### Linux Filesystems

Linux organizes its files in a tree-like structure, starting from the root directory `/`. Each directory has a specific purpose and holds different types of files. Understanding this hierarchy is crucial for navigating your system effectively and knowing where to find or place files.

Here are some of the most important directories you'll encounter frequently:

* `/etc`: **Etc**etera. This directory contains system-wide configuration files. Think of it as the control panel for your entire Linux system. If you need to change how a service behaves or configure networking, you'll often find relevant files here.
    * [Further Reading: What's in /etc?](https://linuxconfig.org/what-is-etc-directory-in-linux)
* `/media`: This is the default mount point for removable media, such as USB drives, external hard drives, and CDs/DVDs, when they are automatically detected and mounted.
    * [Further Reading: The /media Directory (LinuxConfig.org)](https://linuxconfig.org/the-media-directory)
* `/mnt`: **M**ou**nt**. This directory is typically used for temporarily mounted filesystems, such as manually mounted network shares or removable devices. It's similar to `/media` but often used for more manual or system administration tasks.
    * [Further Reading: The /mnt Directory](https://tldp.org/LDP/Linux-Filesystem-Hierarchy/html/mnt.html)
* `/home/`: This is where users' personal directories reside. Each user typically has their own subdirectory within `/home` (e.g., `/home/yourusername`). This is where you'll store your documents, downloads, and project files.
    * [Further Reading: /home directory in Linux](https://cat.pdx.edu/platforms/linux/user-environment/homedir/)
* `/usr/`: **U**nix **S**ystem **R**esources. This is one of the most important directories, containing executables, libraries, documentation, and source code for most user-installed applications. It generally holds shareable, read-only data.
    * [Further Reading: What is /usr in Linux?](https://www.ibm.com/docs/pl/aix/7.1.0?topic=tree-usr-file-system)
* `/sys`: **Sys**tem. This directory provides an interface to kernel data structures and device information. It's a "virtual" filesystem, meaning its contents aren't stored on disk but are generated by the kernel dynamically. It's primarily for system administrators and developers working close to the hardware.
    * [Further Reading: The /sys Virtual Filesystem (IBM)](https://www.ibm.com/docs/en/aix/7.3.0?topic=concepts-virtual-file-systems)

Understanding these common directories helps you efficiently navigate your Linux system, locate essential configuration files, and manage your personal projects.

### Permissions

Linux is a multi-user operating system, which means it's designed to be used by many different people (or processes) at the same time. To ensure security and prevent users from accidentally or maliciously interfering with each other's files or critical system data, Linux implements a robust permissions system.

Every file and directory on a Linux system has associated permissions that dictate who can do what with it. These permissions are assigned to three categories of users:

1.  **Owner (u):** The user who owns the file or directory.
2.  **Group (g):** The group that owns the file or directory. Any user who is a member of this group inherits these permissions.
3.  **Others (o):** Everyone else on the system.

And for each of these categories, three fundamental **file modes** define what actions are allowed:

* **Read (r):**
    * For **files**: Allows viewing the content of the file.
    * For **directories**: Allows listing the contents of the directory (seeing what files are inside).
* **Write (w):**
    * For **files**: Allows modifying or deleting the content of the file.
    * For **directories**: Allows creating, deleting, or renaming files *within* that directory.
* **Executable (x):**
    * For **files**: Allows running the file as a program or script.
    * For **directories**: Allows entering or "cd-ing" into the directory and accessing its contents.

#### `ls -l`: Viewing Permissions

The `ls -l` command (which you practiced in the previous lesson!) provides a "long listing" of files and directories, and the very first column of its output shows the permissions.

Let's break down an example output:
-rw-r--r-- 1 user group 0 May 15 10:00 myfile.txt
drwxr-xr-x 2 user group 4096 May 15 10:00 mydirectory/

The first character indicates the file type:
* `-`: Regular file
* `d`: Directory
* `l`: Symbolic link (a shortcut to another file or directory)

The next nine characters are grouped into three sets of three, representing permissions for the owner, group, and others, respectively:

1.  **`rw-`**: Owner permissions (read, write, no execute)
2.  **`r--`**: Group permissions (read, no write, no execute)
3.  **`r--`**: Others permissions (read, no write, no execute)

So, for `myfile.txt`: the owner can read and write; the group can only read; and others can only read.

For `mydirectory/`: the owner has read, write, and execute permissions; the group has read and execute permissions; and others also have read and execute permissions.

* [Further Reading: Linux File Permissions Explained (DigitalOcean)](https://www.digitalocean.com/community/tutorials/how-to-set-permissions-linux)

#### `chmod`: Changing Permissions

The `chmod` (change mode) command allows you to change the permissions of files and directories. There are two main ways to use `chmod`: **symbolic mode** and **octal (numeric) mode**.

**Symbolic Mode:**
This method uses symbols to add (`+`), remove (`-`), or set (`=`) permissions for specific user categories (`u` for user/owner, `g` for group, `o` for others, `a` for all).

* `chmod u+x myscript.sh`: Add execute permission for the owner to `myscript.sh`.
* `chmod go-w myfile.txt`: Remove write permission for group and others from `myfile.txt`.
* `chmod a=rwx mydirectory/`: Set read, write, and execute permissions for everyone (all) on `mydirectory/`.

**Octal (Numeric) Mode:**
This is a more concise and commonly used method, especially for setting precise permissions. Each permission has a numeric value:

* `r` (read) = 4
* `w` (write) = 2
* `x` (execute) = 1
* `-` (no permission) = 0

You sum these values for each category (owner, group, others) to get a three-digit octal number.

| Permission | Value |
| :--------- | :---- |
| `r--`      | 4     |
| `-w-`      | 2     |
| `--x`      | 1     |
| `rw-`      | 6 (4+2) |
| `r-x`      | 5 (4+1) |
| `rwx`      | 7 (4+2+1)|

Common permission numbers:
* **`755` (rwxr-xr-x):** Owner has full permissions, group and others can read and execute. Common for directories and executable files.
* **`644` (rw-r--r--):** Owner can read/write, group and others can only read. Common for regular files.
* **`777` (rwxrwxrwx):** Everyone has full permissions. **Generally discouraged for security reasons** as it gives all users read, write, and execute access.

* `chmod 755 myscript.sh`: Set permissions to `rwxr-xr-x` for `myscript.sh`.
* `chmod 644 myfile.txt`: Set permissions to `rw-r--r--` for `myfile.txt`.


#### `chown`: Changing Ownership

The `chown` (change owner) command allows you to change the owner and/or the group of a file or directory. This command often requires `sudo` privileges because changing ownership can have significant security implications.

* `chown newuser myfile.txt`: Change the owner of `myfile.txt` to `newuser`.
* `chown :newgroup myfile.txt`: Change the group of `myfile.txt` to `newgroup` (owner remains the same).
* `chown newuser:newgroup myfile.txt`: Change both the owner and group of `myfile.txt`.
* `chown -R newuser mydirectory/`: Change owner recursively for `mydirectory/` and its contents.

* [Further Reading: How to use `chown` on Linux ](https://opensource.com/article/19/8/linux-chown-command)


#### `sudo`: Elevated Privileges

<div class="lesson-note lesson-note--warning" markdown="1">

#### Use `sudo` with Caution!

The `sudo` command (short for **s**uper **u**ser **do**) allows a permitted user to execute a command as the superuser (root) or another user. When you use `sudo`, you are temporarily given administrative power. Because of this, it's critical to understand what a command does before executing it with `sudo`, as you can unintentionally make irreversible changes to your system. Always double-check commands that start with `sudo`.

</div>

* `sudo apt update`: Runs the `apt update` command (which updates the list of available packages) with root privileges.
* `sudo systemctl restart apache2`: Restarts the Apache web server service with root privileges.

When you use `sudo` for the first time in a new terminal session (or after a timeout), you'll be prompted for *your own user password*, not the root password. This is a security measure to confirm that you are an authorized user.

* [Further Reading: How to use `sudo` (Ubuntu Community Help Wiki)](https://help.ubuntu.com/community/Sudoers)

#### `useradd`: Adding New Users

While not a command you'll use daily as a developer unless you're managing servers, `useradd` is fundamental to understanding how new users are created on a Linux system. It allows you to create new user accounts.

* `sudo useradd -m newuser`: Creates a new user named `newuser` and creates their home directory (`-m`).
* `sudo passwd newuser`: Sets a password for the `newuser` account.

<div class="lesson-note" markdown="1">

#### User Management Beyond Basics

For more robust user management, including adding users to groups (like the `sudo` group!), you would typically use `usermod` or `adduser` (which is often a more user-friendly wrapper around `useradd`). The purpose here is just to introduce `useradd` as a core system command related to users and permissions.

</div>

* [Further Reading: How to Add Users on Linux (DigitalOcean)](https://www.digitalocean.com/community/tutorials/how-to-add-and-delete-users-on-ubuntu-20-04)
* [Video: Linux Commands - `useradd` (YouTube)](https://www.youtube.com/watch?v=MJkTugwpMJ0)

### Exercises

Practice these commands to gain hands-on experience with Linux filesystems and permissions.

1.  **Inspect Permissions of Your Home Directory:**
    Navigate to your home directory (`cd ~`) and list its contents in long format. Identify the permissions for yourself (owner), your group, and others.

    ```bash
    cd ~
    ls -l
    ```

    Expected output: Lines similar to `drwxr-xr-x ... yourusername yourusername ... .`. Note the permission string for your home directory and other files/folders within it.

2.  **Change File Permissions (`chmod`):**
    Create a new file `my_secret.txt`. Initially, give only yourself read and write permissions. Then, try to set it so only you can read it, and no one else can do anything.

    ```bash
    touch my_secret.txt
    chmod 600 my_secret.txt # Owner: rw-, Group: ---, Others: ---
    ls -l my_secret.txt
    ```

    Expected output: `ls -l my_secret.txt` should show `-rw-------` as the permissions.

    Now, try to make it executable for everyone (just for practice, you wouldn't usually do this for a text file).

    ```bash
    chmod 777 my_secret.txt # Owner: rwx, Group: rwx, Others: rwx
    ls -l my_secret.txt
    ```

    Expected output: `ls -l my_secret.txt` should show `-rwxrwxrwx`.

3.  **Change Directory Permissions (`chmod`):**
    Create a directory `shared_folder`. Give it `755` permissions so you have full control, but others can only read and execute (enter) it.

    ```bash
    mkdir shared_folder
    chmod 755 shared_folder
    ls -l | grep shared_folder
    ```

    Expected output: A line for `shared_folder` with `drwxr-xr-x` permissions.

4.  **Practice `sudo` (Carefully!):**
    Try to update your system's package list. This requires `sudo` privileges.

    ```bash
    sudo apt update
    ```

    **Expected output:** You will likely be prompted for your password. After entering it, the system will update its package lists. (If you're on macOS or another distro, use your system's equivalent package manager command, e.g., `brew update` on macOS).

    <div class="lesson-note lesson-note--tip" markdown="1">

    #### A note on typing passwords in the terminal

    When using a command in the terminal that requires you to enter your password for authentication (such as sudo), you will notice that the characters aren't visible as you type them. While it might seem like the terminal isn’t responding, don’t worry!

    This is a security feature to protect confidential information, like how password fields on websites use asterisks or dots. By not displaying the characters you write, the terminal keeps your password secure.

    You can still enter your password as normal and press Enter to submit it.

    </div>

5.  **Symbolic `chmod` for specific users:**
    Create a file `my_doc.txt`. Give the owner read and write permissions, remove all permissions for the group, and give others only read permission.

    ```bash
    touch my_doc.txt
    chmod u=rw,g=,o=r my_doc.txt
    ls -l my_doc.txt
    ```

    Expected output: `ls -l my_doc.txt` should show `-rw----r--`.

6.  **Make a script executable:**
    Create a simple script file `hello.sh` that just prints "Hello, World!". Give it execute permission only to the owner, and no one else. Then try to run it.

    ```bash
    echo '#!/bin/bash' > hello.sh
    echo 'echo "Hello, World!"' >> hello.sh
    chmod u+x,go-rwx hello.sh
    ls -l hello.sh
    ./hello.sh # Run the script
    ```

    Expected output: `ls -l hello.sh` should show `-rwx------`. Running `./hello.sh` should print "Hello, World!".

7.  **Change File Ownership (`chown`):**
    This exercise requires `sudo` and understanding your system's users. You will temporarily change the owner of a file to `root` and then back to your user.

    ```bash
    touch my_temp_file.txt
    sudo chown root my_temp_file.txt
    ls -l my_temp_file.txt
    # Now, change it back to your user. Replace 'yourusername' with your actual username.
    sudo chown yourusername my_temp_file.txt
    ls -l my_temp_file.txt
    ```

    Expected output: After the first `chown`, the owner should change to `root`. After the second `chown`, it should change back to your `yourusername`.

8.  **Understanding Default Permissions:**
    Create a new empty file and a new empty directory in your home folder. Inspect their default permissions. Note how they differ.

    ```bash
    touch default_file.txt
    mkdir default_dir
    ls -l default_file.txt default_dir
    ```

    Expected output: You'll typically see `rw-r--r--` for the file and `rwxr-xr-x` for the directory, reflecting common default permissions which give execute permission to directories for easy navigation.

### Let us know how it went!

You've just completed a deep dive into Linux filesystems and the critical concept of permissions! This might have felt like a lot of new information, but understanding these elements is fundamental to working effectively and securely in a Linux environment. The more you work with Linux, the more intuitive `ls -l`, `chmod`, and `chown` will become.

Keep practicing, and don't hesitate to revisit these concepts. You're building a strong foundation for your development journey!

### Additional Resources

This section contains helpful links to related content. It isn't required, so consider it supplemental.

* **Linux Filesystem Hierarchy Standard (FHS):** [The official document that defines the structure of Linux filesystems](https://refspecs.linuxfoundation.org/FHS_3.0/fhs/index.html).
* **The Linux `chmod` Command: Absolute Mode (TutorialsPoint):** [A detailed guide focusing on the numeric/octal mode of `chmod`](https://www.tutorialspoint.com/unix_commands/chmod.htm).
* **Linux File Permissions - An In-Depth Look (Linode Guides):** [A more comprehensive article on Linux permissions concepts](https://www.linode.com/docs/guides/modify-file-permissions-with-chmod/).
* **Linux Permissions Calculator:** [An interactive tool to help understand octal permissions](https://chmod-calculator.com/).

### Knowledge Check

The following questions are an opportunity to reflect on key topics in this lesson. If you can't answer a question, click on it to review the material, but keep in mind you are not expected to memorize or master this knowledge.


  
- 
- [Introduction](#introduction)
  - [Lesson Overview](#lesson-overview)
  - [Assignment](#assignment)
  - [Linux Filesystems](#linux-filesystems-1)
  - [Permissions](#permissions-1)
    - [`ls -l`: Viewing Permissions](#ls--l-viewing-permissions)
    - [`chmod`: Changing Permissions](#chmod-changing-permissions)
    - [`chown`: Changing Ownership](#chown-changing-ownership)
    - [`sudo`: Elevated Privileges](#sudo-elevated-privileges)
    - [Use `sudo` with Caution!](#use-sudo-with-caution)
    - [`useradd`: Adding New Users](#useradd-adding-new-users)
    - [User Management Beyond Basics](#user-management-beyond-basics)
  - [Exercises](#exercises)
  - [Let us know how it went!](#let-us-know-how-it-went)
  - [Additional Resources](#additional-resources)
  - [Knowledge Check](#knowledge-check)

